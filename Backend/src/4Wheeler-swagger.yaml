openapi: 3.0.0
info:
  title: 4Wheeler API Documentation
  version: 1.0.0
  description: |-
    API documentation for the 4Wheeler Website.
    This project provides the backend services for managing vehicles for a car dealership, 
    helping customers to have a better look before deciding to go to the store and make a purchase.
    The application offers features such as user authentication, search and sort based on criteria functionality, and real-time chat with the store.
    The application is built with scalability, security, and modern REST API design principles in mind.
    Some useful links:
    - [The 4Wheeler_BE repository](https://github.com/Jung2304/4Wheeler_BE)
    - [The source API documentation for the 4Wheeler]()
  contact:
    email: 23520333@gm.uit.edu.vn
servers:
  - url: http://localhost:4000
    description: Local server
  - url: https://fourwheeler.onrender.com/api-docs/
    description: Production server
tags:
  - name: auth
    description: Authentication endpoints for User's requests
  - name: cars 
    description: Endpoints for retrieving car information, and showroom details. 
  - name: admin
    description: Admin only endpoints for managing cars 
paths:
  /api/auth/users/register:
    post:
      tags:
        - auth
      summary: Register a new user
      operationId: registerUser
      requestBody:
        description: Creates a new user account with a unique username, email, and password.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterBody'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User registered successfully
                  result:
                    type: object
                    properties:
                      access_token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      refresh_token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: Invalid or missing email format
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid or missing email format        
        '409':
          description: Username or email already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      username:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "test_username"
                          msg:
                            type: string
                            example: "Username already exists"
                          path:
                            type: string
                            example: "username"
                          location:
                            type: string
                            example: "body"
                      email:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "test@gmail.com"
                          msg:
                            type: string
                            example: "Email already exists"
                          path:
                            type: string
                            example: "email"
                          location:
                            type: string
                            example: "body"
        '500':
          description: Registration failed due to server error
      security: []

  /api/auth/users/login:
    post:
      tags:
        - auth
      summary: Log in a user
      operationId: loginUser
      requestBody:
        description: The user login credentials
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginBody'
      responses:
        '200':
          description: Login successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successfully
                  data:
                    $ref: '#/components/schemas/AuthenticateSuccessfully'
        '400':
          description: Invalid or missing email format
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid or missing email format
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      password:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "wrong-password"
                          msg:
                            type: string
                            example: "Email or password is incorrect!"
                          path:
                            type: string
                            example: "password"
                          location:
                            type: string
                            example: "body"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      email:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "Non-existent-email@gmail.com"
                          msg:
                            type: string
                            example: "Email not found!"
                          path:
                            type: string
                            example: "email"
                          location:
                            type: string
                            example: "body"
        '500':
          description: Registration failed due to server error
      security: []

  /api/auth/users/refresh-token:
    post:
      tags:
        - auth
      summary: Refreshes the access token
      operationId: refreshToken
      requestBody:
        description: The refresh token using for generating a new access token 
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        '200':
          description: Get new access token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Access token refreshed
                  result:
                    $ref: '#/components/schemas/AuthenticateSuccessfully'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Refresh token missing or used"
        '403':
          description: Invalid or expired refresh token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid or expired refresh token"
      security: []

  /api/auth/users/logout:
    post:
      tags:
        - auth
      summary: Log out the current user
      operationId: logoutUser
      requestBody:
        description: Operation does not require a body
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              required:
                - refresh_token
      responses:
        '200':
          description: Logged out successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Logout successfully"
        '500':
          description: Server error while logging out
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Logout failed due to server error"
      security: []

  /api/auth/google:
    post:
      tags:
        - auth
      summary: Login or register with Google
      operationId: GoogleOauth
      description: |-
        Authenticates a user with Google.   
        - If the user already exists (matched by email), returns user data and sets an access token cookie.  
        - If the user does not exist, automatically creates a new account using data from Google.  
        The password is auto-generated and hashed internally.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoogleLoginBody'
      responses:
        '200':
          description: Successfully logged in or registered
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successfully
                  data:
                    $ref: '#/components/schemas/UserResponse'
        '400':
          description: Missing ID token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token is not granted by Firebase
        '401':
          description: Invalid or expired ID token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid or expired ID token 
        '500':
          description: Server error while logging in with Google
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while logging in with Google!"
      security: []

  /api/auth/users/forgot-password:
    post:
      tags:
        - auth
      summary: Request password reset via email
      operationId: forgotPassword
      requestBody:
        description: The email to send the OTP code
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: 
                  type: string
                  example: "test@gmail.com"
      responses:
        '200':
          description: OTP sent successfully!
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "OTP code sent via email!"
                  OTP:
                    type: string
                    example: "230405"
        '400':
          description: Invalid email format
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      email:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "example@"
                          msg:
                            type: string
                            example: "Invalid or missing email format!"
                          path:
                            type: string
                            example: "email"
                          location:
                            type: string
                            example: "body"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      email:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "Non-existent-email@gmail.com"
                          msg:
                            type: string
                            example: "Email not found!"
                          path:
                            type: string
                            example: "email"
                          location:
                            type: string
                            example: "body"
        '500':
          description: Server error while working with OTP
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while generating or sending OTP!"
      security: []

  /api/auth/users/otp-password:
    post:
      tags:
        - auth
      summary: Verify OTP for password reset
      description: |-
        Validates the OTP sent to user's email and grant a reset-token if correct.
      operationId: verifyOtpPassword
      requestBody:
        description: OTP code to verify
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                otp: 
                  type: string
                  example: "230405"
      responses:
        '200':
          description: OTP verified successfully!
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "OTP verified successfully!"
                  reset_token:
                    type: string
                    example: "7fd6217c4b12644681808f06679d4fd0f4b7dd5fa46f02967ebdd07d733bd991"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid or expired OTP code!"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    properties:
                      email:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "field"
                          value:
                            type: string
                            example: "Non-existent-email@gmail.com"
                          msg:
                            type: string
                            example: "Email not found!"
                          path:
                            type: string
                            example: "email"
                          location:
                            type: string
                            example: "body"
        '500':
          description: Server error while verifying OTP
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while verifying OTP code!"
      security: []

  /api/auth/users/reset-password:
    post:
      tags:
        - auth
      summary: Reset user's password using reset token
      operationId: resetPassword
      requestBody:
        description: The new password and reset token 
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                new_password: 
                  type: string
                  example: "NewPassword"
                reset_token:
                  type: string
                  example: "7fd6217c4b12644681808f06679d4fd0f4b7dd5fa46f02967ebdd07d733bd991"
      responses:
        '200':
          description: Password reset successfully!
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Password reset successfully!"
        '400':
          description: Invalid request or same password as before
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "New password cannot be the same as your old password!"
        '401':
          description: Invalid or expired reset token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid or expired reset token!"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User not found!"
        '500':
          description: Server error while resetting password!
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while resetting password!"
      security: []

  /api/auth/users/profile:
    get:
      tags:
        - auth
      summary: Get user profile with favorites
      operationId: getUserProfile
      description: Retrieve the authenticated user's profile information including their favorite cars
      responses:
        '200':
          description: User profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User profile retrieved successfully!"
                  user:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "65320a8c32f4e1b2c3d4e5f6"
                      username:
                        type: string
                        example: "testuser1"
                      email:
                        type: string
                        example: "testuser1@gmail.com"
                      phone:
                        type: string
                        example: "0123456789"
                      avatar:
                        type: string
                        example: "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"
                      role:
                        type: string
                        enum: ["user", "admin"]
                        example: "user"
                      status:
                        type: string
                        example: "active"
                      favorites:
                        type: array
                        items:
                          $ref: '#/components/schemas/CarResponse'
                        description: Array of favorite cars
                      createdAt:
                        type: string
                        format: date-time
                        example: "2023-10-25T12:34:56.789Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2023-10-25T12:34:56.789Z"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User not found!"
        '500':
          description: Server error while fetching user profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while fetching user profile!"
      security:
        - BearerAuth: []

  /api/cars/listing:
    get:
      tags:
        - cars
      summary: Get all cars with pagination, search, and category filters
      operationId: getCars
      parameters:
        - name: page
          in: query
          description: Page number for pagination (default is 1)
          required: false
          schema:
            type: integer
            example: 1
        - name: limit
          in: query
          description: Number of cars per page (default is 12)
          required: false
          schema:
            type: integer
            example: 12
        - name: search
          in: query
          description: Search by car make or model name (case-insensitive)
          required: false
          schema:
            type: string
            example: "BMW"
        - name: category
          in: query
          description: Filter by car category (e.g., SUV, Sedan, Hatchback)
          required: false
          schema:
            type: string
            example: "SUV"
        - name: status
          in: query
          description: Filter by car status
          required: false
          schema:
            type: string
            example: "available"
      responses:
        '200':
          description: List of cars retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  page:
                    type: integer
                    example: 1
                  pages:
                    type: integer
                    example: 5
                  total:
                    type: integer
                    example: 50
                  cars:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarResponse'
        '500':
          description: Server error while fetching cars
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to fetch cars"
      security: []

  /api/cars/{id}:
    get:
      tags:
        - cars
      summary: Get car details by ID
      operationId: getCarDetail
      parameters:
        - name: id
          in: path
          description: Car ID (MongoDB ObjectId)
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      responses:
        '200':
          description: Car details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car not found"
        '500':
          description: Server error while fetching car details
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to fetch car details"
      security: []

  /api/cars/user/favorites:
    get:
      tags:
        - cars
      summary: Get user's favorite cars
      operationId: getUserFavorites
      description: Retrieve all cars saved to the user's favorites/wishlist
      responses:
        '200':
          description: Favorite cars retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    example: 3
                  favorites:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User not found"
        '500':
          description: Server error while fetching favorites
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to fetch favorites"
      security:
        - BearerAuth: []

  /api/cars/favorites/{carId}:
    post:
      tags:
        - cars
      summary: Add car to user's favorites
      operationId: addToFavorites
      description: Add a specific car to the user's favorites/wishlist
      parameters:
        - name: carId
          in: path
          description: Car ID to add to favorites
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      responses:
        '200':
          description: Car added to favorites successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car added to favorites"
                  favorites:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car not found"
        '500':
          description: Server error while adding to favorites
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to add to favorites"
      security:
        - BearerAuth: []

    delete:
      tags:
        - cars
      summary: Remove car from user's favorites
      operationId: removeFromFavorites
      description: Remove a specific car from the user's favorites/wishlist
      parameters:
        - name: carId
          in: path
          description: Car ID to remove from favorites
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      responses:
        '200':
          description: Car removed from favorites successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car removed from favorites"
                  favorites:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarResponse'
        '500':
          description: Server error while removing from favorites
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to remove from favorites"
      security:
        - BearerAuth: []

  /api/admin/cars:
    get:
      tags:
        - admin
      summary: Get all cars including deleted (admin only)
      operationId: getAllCars
      parameters:
        - name: page
          in: query
          description: Page number for pagination (default is 1)
          required: false
          schema:
            type: integer
            example: 1
        - name: limit
          in: query
          description: Number of cars per page (default is 12)
          required: false
          schema:
            type: integer
            example: 12
        - name: search
          in: query
          description: Search by car make or model name (case-insensitive)
          required: false
          schema:
            type: string
            example: "BMW"
        - name: category
          in: query
          description: Filter by car category (e.g., SUV, Sedan, Hatchback)
          required: false
          schema:
            type: string
            example: "SUV"
        - name: status
          in: query
          description: Filter by car status
          required: false
          schema:
            type: string
            example: "available"
      responses:
        '200':
          description: List of all cars retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  page:
                    type: integer
                    example: 1
                  pages:
                    type: integer
                    example: 5
                  total:
                    type: integer
                    example: 50
                  cars:
                    type: array
                    items:
                      $ref: '#/components/schemas/CarResponse'
        '500':
          description: Server error while fetching cars
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to fetch cars due to server error!"
      security:
        - BearerAuth: []

  /api/admin/cars/{id}:
    get:
      tags:
        - admin
      summary: Get car details by ID including deleted (admin only)
      operationId: getCarDetailAdmin
      parameters:
        - name: id
          in: path
          description: Car ID (MongoDB ObjectId)
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      responses:
        '200':
          description: Car details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car not found"
        '500':
          description: Server error while fetching car details
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to fetch car details"
      security:
        - BearerAuth: []

    put:
      tags:
        - admin
      summary: Update car details (admin only)
      operationId: updateCar
      parameters:
        - name: id
          in: path
          description: Car ID (MongoDB ObjectId)
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      requestBody:
        description: Car details to update (all fields optional)
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                make:
                  type: string
                  example: "BMW"
                model:
                  type: string
                  example: "X5"
                year:
                  type: integer
                  example: 2023
                price:
                  type: number
                  format: double
                  example: 75000
                color:
                  type: string
                  example: "Black"
                category:
                  type: string
                  example: "SUV"
                seats:
                  type: integer
                  example: 5
                transmission:
                  type: string
                  example: "Automatic"
                fuelType:
                  type: string
                  example: "Gasoline"
                engine:
                  type: string
                  example: "2.0L Turbo"
                horsepower:
                  type: integer
                  example: 335
                images:
                  type: array
                  items:
                    type: string
                  example: ["image1.jpg"]
                description:
                  type: string
                  example: "Updated description"
      responses:
        '200':
          description: Car updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car updated successfully!"
                  car:
                    $ref: '#/components/schemas/CarResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car not found"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to update car!"
      security:
        - BearerAuth: []

    delete:
      tags:
        - admin
      summary: Delete car (soft delete - admin only)
      operationId: deleteCar
      parameters:
        - name: id
          in: path
          description: Car ID (MongoDB ObjectId)
          required: true
          schema:
            type: string
            example: "65320a8c32f4e1b2c3d4e5f6"
      responses:
        '200':
          description: Car deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car deleted successfully!"
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Car not found"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to delete car!"
      security:
        - BearerAuth: []

  /api/admin/cars/create:
    post:
      tags:
        - admin
      summary: Create a new car (admin only)
      operationId: createCar
      requestBody:
        description: Car details to create
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - make
                - model
                - year
                - price
              properties:
                make:
                  type: string
                  example: "BMW"
                model:
                  type: string
                  example: "X5"
                year:
                  type: integer
                  example: 2023
                price:
                  type: number
                  format: double
                  example: 75000
                color:
                  type: string
                  example: "Black"
                category:
                  type: string
                  example: "SUV"
                seats:
                  type: integer
                  example: 5
                transmission:
                  type: string
                  example: "Automatic"
                fuelType:
                  type: string
                  example: "Gasoline"
                engine:
                  type: string
                  example: "2.0L Turbo"
                horsepower:
                  type: integer
                  example: 335
                images:
                  type: array
                  items:
                    type: string
                  example: ["image1.jpg", "image2.jpg"]
                description:
                  type: string
                  example: "Premium luxury SUV"
      responses:
        '201':
          description: Car created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "New car created successfully!"
                  car:
                    $ref: '#/components/schemas/CarResponse'
        '400':
          description: Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Make, model, year and price are required!"
        '409':
          description: Car already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Brand BMW with model X5 already exists!"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed due to server error!"
      security:
        - BearerAuth: []


components:
  schemas:
    RegisterBody:
      type: object
      required:
        - username
        - email 
        - password
      properties:
        username:
          type: string
          description: Must be unique across all users
          example: "test_username"
        email:
          type: string
          description: Must be unique across all users
          example: "test@gmail.com"
        password:
          type: string
          example: "Test123@"
    LoginBody:
      type: object
      required:
        - email 
        - password
      properties:
        email:
          type: string
          example: "test@gmail.com"
        password:
          type: string
          example: "Test123@"
    AuthenticateSuccessfully:
      type: object
      properties:
        access_token:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refresh_token:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    GoogleLoginBody:
      type: object
      required:
      - email
      - name
      - photo
      properties:
        email:
          type: string
          example: "example@gmail.com"
        name:
          type: string
          example: "jung"
        photo:
          type: string
          example: "https://lh3.googleusercontent.com/a-/AOh14GgXYZ"
    UserResponse:
      type: object
      properties:
        id:
          type: string
          example: "65320a8c32f4e"
        email:
          type: string
          example: "example@gmail.com"
        name:
          type: string
          example: "jung"
        accessToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    CarResponse:
      type: object
      properties:
        _id:
          type: string
          example: "65320a8c32f4e1b2c3d4e5f6"
        make:
          type: string
          example: "BMW"
        model:
          type: string
          example: "X5"
        year:
          type: integer
          example: 2023
        price:
          type: number
          format: double
          example: 75000
        color:
          type: string
          example: "Black"
        category:
          type: string
          example: "SUV"
        seats:
          type: integer
          example: 5
        transmission:
          type: string
          example: "Automatic"
        fuelType:
          type: string
          example: "Gasoline"
        engine:
          type: string
          example: "2.0L Turbo"
        horsepower:
          type: integer
          example: 335
        images:
          type: array
          items:
            type: string
          example: ["image1.jpg", "image2.jpg"]
        description:
          type: string
          example: "Premium luxury SUV with advanced features"
        deleted:
          type: boolean
          example: false
        createdAt:
          type: string
          format: date-time
          example: "2023-10-25T12:34:56.789Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-10-25T12:34:56.789Z"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Use the `Bearer` scheme to authenticate requests. Include the token in the `Authorization` header as follows:
        ```
        Authorization: Bearer <your_token>
        ```
security:
  - BearerAuth: []
  



